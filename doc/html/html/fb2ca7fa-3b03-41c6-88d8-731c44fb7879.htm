<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>The Input Build</title><link rel="stylesheet" type="text/css" href="../styles/Presentation.css" /><link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLink.css" /><link rel="stylesheet" type="text/css" href="ms-help://Dx/DxRuntime/DxLink.css" /><script type="text/javascript" src="../scripts/EventUtilities.js"> </script><script type="text/javascript" src="../scripts/SplitScreen.js"> </script><script type="text/javascript" src="../scripts/Dropdown.js"> </script><script type="text/javascript" src="../scripts/script_manifold.js"> </script><script type="text/javascript" src="../scripts/LanguageFilter.js"> </script><script type="text/javascript" src="../scripts/DataStore.js"> </script><script type="text/javascript" src="../scripts/CommonUtilities.js"> </script><script type="text/javascript" src="../scripts/MemberFilter.js"> </script><xml><MSHelp:TOCTitle Title="" /><MSHelp:Keyword Index="A" Term="fb2ca7fa-3b03-41c6-88d8-731c44fb7879" /><MSHelp:Attr Name="RevisionNumber" Value="1" /><MSHelp:Attr Name="AssetID" Value="fb2ca7fa-3b03-41c6-88d8-731c44fb7879" /><MSHelp:Attr Name="Abstract" Value="The Unity http://unity3d.com/ NMGen build process is pretty much the same as the standard build process describe by . The main difference is in the input compile process." /><MSHelp:Attr Name="TopicType" Value="kbArticle" /><MSHelp:Attr Name="Locale" Value="en-us" /></xml></head><body><input type="hidden" id="userDataCache" class="userDataStyle" /><input type="hidden" id="hiddenScrollOffset" /><img id="collapseImage" style="display:none; height:0; width:0;" src="../icons/collapse_all.gif" alt="Collapse image" title="Collapse image" /><img id="expandImage" style="display:none; height:0; width:0;" src="../icons/expand_all.gif" alt="Expand Image" title="Expand Image" /><img id="collapseAllImage" style="display:none; height:0; width:0;" src="../icons/collall.gif" alt="CollapseAll image" title="CollapseAll image" /><img id="expandAllImage" style="display:none; height:0; width:0;" src="../icons/expall.gif" alt="ExpandAll image" title="ExpandAll image" /><img id="dropDownImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected.gif" alt="DropDown image" title="DropDown image" /><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected_hover.gif" alt="DropDownHover image" title="DropDownHover image" /><img id="copyImage" style="display:none; height:0; width:0;" src="../icons/copycode.gif" alt="Copy image" title="Copy image" /><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../icons/copycodeHighlight.gif" alt="CopyHover image" title="CopyHover image" /><img id="checkBoxSelectImage" style="display:none; height:0; width:0;" src="../icons/ch_selected.gif" /><img id="checkBoxUnSelectImage" style="display:none; height:0; width:0;" src="../icons/ch_unselected.gif" /><img id="checkBoxSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/ch_selected_hover.gif" /><img id="checkBoxUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/ch_unselected_hover.gif" /><img id="radioSelectImage" style="display:none; height:0; width:0;" src="../icons/r_select.gif" /><img id="radioUnSelectImage" style="display:none; height:0; width:0;" src="../icons/r_unselect.gif" /><img id="radioSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/r_select_hover.gif" /><img id="radioUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/r_unselect_hover.gif" /><img id="curvedLeftSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_lft_cnr.gif" /><img id="curvedRightSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_rt_cnr.gif" /><img id="curvedLeftUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_lft_cnr.gif" /><img id="curvedRightUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_rt_cnr.gif" /><img id="gradLeftSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_lft_grad.gif" /><img id="gradRightSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_rt_grad.gif" /><img id="gradLeftUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_lft_grad.gif" /><img id="gradRightUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_rt_grad.gif" /><img id="twirlSelectImage" style="display:none; height:0; width:0;" src="../icons/twirl_selected.gif" /><img id="twirlUnSelectImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected.gif" /><img id="twirlSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_selected_hover.gif" /><img id="twirlUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected_hover.gif" /><img id="NSRBottomImage" style="display:none; height:0; width:0;" src="../icons/NSRbottomgrad.gif" /><div id="header"><table id="topTable"><tr id="headerTableRow3"><td><span onclick="ExpandCollapseAll(toggleAllImage)" style="cursor:default;" onkeypress="ExpandCollapseAll_CheckKey(toggleAllImage, event)" tabindex="0"><img ID="toggleAllImage" class="toggleAll" src="../icons/collall.gif" alt="CollapseAll image" title="CollapseAll image" /><label id="collapseAllLabel" for="toggleAllImage" style="display: none;">Collapse All</label><label id="expandAllLabel" for="toggleAllImage" style="display: none;">Expand All</label> </span> | <span id="languageFilterToolTip" style="cursor:default;" onmouseover="languageFilterImage.src=dropDownHoverImage.src;" onmouseout="languageFilterImage.src=dropDownImage.src;" tabindex="0"><img id="languageFilterImage" src="../icons/twirl_unselected.gif" alt="DropDown image" title="DropDown image" /><label id="CSharpLabel" for="languageFilterImage" style="display: none;">Language Filter: C#</label><label id="VisualBasicLabel" for="languageFilterImage" style="display: none;">Language Filter: Visual Basic</label><label id="ManagedCPlusPlusLabel" for="languageFilterImage" style="display: none;">Language Filter: Visual C++</label></span><div id="languageSpan"><div id="CSharp" onclick="changeLanguage(data, 'CSharp', 'cs');"><img id="CSharpImage" onmouseover="mouseOverCheck(CSharpImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(CSharpImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> C#</div><br /><div id="VisualBasic" onclick="changeLanguage(data, 'VisualBasic', 'vb');"><img id="VisualBasicImage" onmouseover="mouseOverCheck(VisualBasicImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(VisualBasicImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> Visual Basic</div><br /><div id="ManagedCPlusPlus" onclick="changeLanguage(data, 'ManagedCPlusPlus', 'cpp');"><img id="ManagedCPlusPlusImage" onmouseover="mouseOverCheck(ManagedCPlusPlusImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(ManagedCPlusPlusImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> Visual C++</div><br /></div> | <a href="#seeAlsoToggle" onclick="OpenSection(seeAlsoToggle)">See Also</a></td></tr><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText">CritterAI Documentation</span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">The Input Build</span></td></tr><tr><td class="nsrBottom" background="../icons/NSRbottomgrad.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()" /><span style="color: DarkGray"><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[This is preliminary documentation and is subject to change.]</p></span><div class="introduction"><p>
			The <a href="http://unity3d.com/" target="_blank">Unity</a> NMGen build process is pretty much the same as the standard build process describe by 
			<span sdata="link"><a href="0b06b934-9f2b-43a3-a96b-6fd9dc8483c7.htm">An Introduction to NMGen</a></span>.   The main difference is in the input
			compile process. 
			</p><p>
			The input compile process is manged by an input builder that is modified by the scene query and input processors assigned to the 
			<span sdata="cer" target="T:NavmeshBuild"><a href="4E4B3848.htm">NavmeshBuild</a></span> asset.
			</p></div><h1 class="heading"><span onclick="ExpandCollapse(sectionToggleID0EBAAA)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(sectionToggleID0EBAAA, event)" tabindex="0"><img id="sectionToggleID0EBAAA" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />The Input Compile Process</span></h1><div id="sectionSectionID0EBAAA" class="section" name="collapseableSection" style=""><p>
				The input compile process is managed by the input builder.  The the only thing the builder does is manage
				the input processors.  At each step it makes sure all the necessary build assets are ready for use and calls the
				processors in ascending priority.  A processor can be active during one step or multiple steps.  For example,
				the <span sdata="cer" target="T:MeshCompiler"><a href="9865750C.htm">MeshCompiler</a></span> loads MeshFilter components from the scene during the 
				load step, then triangulates them during the compile step.
				</p><div class="mediaNear"><img alt="Unity Input Build Process" src="../media/UnityInputBuildProcess.png" /></div><h3 class="subHeading">Load Components</h3><div class="subsection"><p>
						The scene query asset is used to determine which components in the scene will be included in the input compile.  Any ScritableObject that
						implements the <span sdata="cer" target="T:org.critterai.nmbuild.u3d.editor.ISceneQuery"><a href="30E2D404.htm">ISceneQuery</a></span> interface can be used.  For example, 
						if you want the build to gather scene components based on tags, then you'll use the <span sdata="cer" target="T:TagSceneQuery"><a href="65067ED4.htm">TagSceneQuery</a></span> asset.
						If no scene query is provided, then the the query will be global.  (E.g. All MeshFitlers in the scene, all Terrains in the scene, etc.)
						</p><p>
						During the load component step, each input processor uses the scene query to load the components that it cares about.  For example,
						the <span sdata="cer" target="T:MeshCompiler"><a href="9865750C.htm">MeshCompiler</a></span> will load all MeshFilters and the <span sdata="cer" target="T:TerrainCompiler"><a href="F64A9028.htm">TerrainCompiler</a></span> will
						load the Terrain component.    
						</p></div><h3 class="subHeading">Filter Components</h3><div class="subsection"><p>
						During the filter component step the input processors have a chance to remove components from the input compile.   The component loaders are generally dumb.
						They load everything the scene query let's them load. In this step, other processors can refine the result.  For example, a 
						<span sdata="cer" target="T:MeshInputFilter"><a href="9FEDF50B.htm">MeshInputFilter</a></span> can be used to remove MeshFilter's that reference all 'door' meshes.  Or the
						<span sdata="cer" target="T:StaticFilter"><a href="A2C07884.htm">StaticFilter</a></span> can be used to remove all components not marked as static.
						</p></div><h3 class="subHeading">Apply Area Modifiers</h3><div class="subsection"><p>
						At this point all components that will be compiled have been gathered.  During this step input processors can assign custom areas to each 
						component.  The assignments will be used during the compile step.  For example, the <span sdata="cer" target="T:MeshAreaDef"><a href="198ACA7D.htm">MeshAreaDef</a></span> 
						can assign the area 21 to all MeshFilters that reference swamp and marsh meshes.  During the compile step the 
						<span sdata="cer" target="T:MeshCompiler"><a href="9865750C.htm">MeshCompiler</a></span> will then assign 21 to all triangles generated from the meshes.
						</p><p /><div class="alert"><table><tr><th><img src="../icons/alert_note.gif" title="Note" /> <b>Note:</b></th></tr><tr><td><p><span sdata="cer" target="F:org.critterai.nmgen.NMGen.MaxArea"><a href="124EC9BA.htm">MaxArea</a></span> will be assigned by default.  You can use the
							<span sdata="cer" target="T:DefaultAreaDef"><a href="5C70FF59.htm">DefaultAreaDef</a></span> asset to assign a different area as the default.
							</p></td></tr></table></div></div><h3 class="subHeading">Compile Input</h3><div class="subsection"><p>
						During the compile input step the input processors will compile everything needed to create the objects required by the rest of the NMGen build process.  
						(I.e. The <span sdata="cer" target="T:org.critterai.nmbuild.InputGeometry"><a href="AF3844AA.htm">InputGeometry</a></span>, <span sdata="cer" target="T:org.critterai.nmbuild.ProcessorSet"><a href="E67B5D5E.htm">ProcessorSet</a></span>, and <span sdata="cer" target="T:org.critterai.nmbuild.ConnectionSet"><a href="5AB06572.htm">ConnectionSet</a></span> objects.)  MeshFilter and Terrain components will
						be triangulated, and off-mesh connections and NMGen processors created.
						</p></div><h3 class="subHeading">Post-Process</h3><div class="subsection"><p>
						At this point all data needed to create the final input objects has been compiled.  During the post-process step the input processors are
						given the oportunity to make final adjustmwents to the data before it is locked down in the immutable <span sdata="cer" target="T:org.critterai.nmbuild.InputGeometry"><a href="AF3844AA.htm">InputGeometry</a></span>, <span sdata="cer" target="T:org.critterai.nmbuild.ProcessorSet"><a href="E67B5D5E.htm">ProcessorSet</a></span>, 
						and <span sdata="cer" target="T:org.critterai.nmbuild.ConnectionSet"><a href="5AB06572.htm">ConnectionSet</a></span> objects.
						</p></div></div><h1 class="heading"><span onclick="ExpandCollapse(seeAlsoToggle)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(seeAlsoToggle, event)" tabindex="0"><img id="seeAlsoToggle" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />See Also</span></h1><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><h4 class="subHeading">Concepts</h4><div class="seeAlsoStyle"><span sdata="link"><a href="61341701-6cb3-408b-9b1e-d60e3fb817e1.htm">Building Navigation Meshes</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="80abba67-1b0e-4ada-9be1-e12b386978d3.htm">Build Configuration</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="b2097a0c-c41b-4d23-8861-2faccfc574f1.htm">The Advanced Build Type</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="0b06b934-9f2b-43a3-a96b-6fd9dc8483c7.htm">An Introduction to NMGen</a></span></div></div><div id="footer"><div class="footerLine"><img width="100%" height="3px" src="../icons/footer.gif" alt="Footer image" title="Footer image" /></div><a href="http://www.critterai.org/" target="_parent">Project Home</a> | <a href="http://code.google.com/p/critterai/" target="_parent">Source Code</a> | <a href="http://www.critterai.org/cailic" target="_parent">License</a><p />Copyright (c) 2010-2012 Stephen A. Pratt</div></div></div></body></html>