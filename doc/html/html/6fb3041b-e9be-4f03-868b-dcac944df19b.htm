<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Introduction to Heightfields</title><link rel="stylesheet" type="text/css" href="../styles/Presentation.css" /><link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLink.css" /><link rel="stylesheet" type="text/css" href="ms-help://Dx/DxRuntime/DxLink.css" /><script type="text/javascript" src="../scripts/EventUtilities.js"> </script><script type="text/javascript" src="../scripts/SplitScreen.js"> </script><script type="text/javascript" src="../scripts/Dropdown.js"> </script><script type="text/javascript" src="../scripts/script_manifold.js"> </script><script type="text/javascript" src="../scripts/LanguageFilter.js"> </script><script type="text/javascript" src="../scripts/DataStore.js"> </script><script type="text/javascript" src="../scripts/CommonUtilities.js"> </script><script type="text/javascript" src="../scripts/MemberFilter.js"> </script><xml><MSHelp:TOCTitle Title="" /><MSHelp:Keyword Index="A" Term="6fb3041b-e9be-4f03-868b-dcac944df19b" /><MSHelp:Attr Name="RevisionNumber" Value="1" /><MSHelp:Attr Name="AssetID" Value="6fb3041b-e9be-4f03-868b-dcac944df19b" /><MSHelp:Attr Name="Abstract" Value="In order to use the advanced navigation mesh build features you will need to understand the core NMGen build process, and in order to understand that process you'll need to understand heightfields. There are two types of heightfields: voxelhttp://en. ..." /><MSHelp:Attr Name="TopicType" Value="kbArticle" /><MSHelp:Attr Name="Locale" Value="en-us" /></xml></head><body><input type="hidden" id="userDataCache" class="userDataStyle" /><input type="hidden" id="hiddenScrollOffset" /><img id="collapseImage" style="display:none; height:0; width:0;" src="../icons/collapse_all.gif" alt="Collapse image" title="Collapse image" /><img id="expandImage" style="display:none; height:0; width:0;" src="../icons/expand_all.gif" alt="Expand Image" title="Expand Image" /><img id="collapseAllImage" style="display:none; height:0; width:0;" src="../icons/collall.gif" alt="CollapseAll image" title="CollapseAll image" /><img id="expandAllImage" style="display:none; height:0; width:0;" src="../icons/expall.gif" alt="ExpandAll image" title="ExpandAll image" /><img id="dropDownImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected.gif" alt="DropDown image" title="DropDown image" /><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected_hover.gif" alt="DropDownHover image" title="DropDownHover image" /><img id="copyImage" style="display:none; height:0; width:0;" src="../icons/copycode.gif" alt="Copy image" title="Copy image" /><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../icons/copycodeHighlight.gif" alt="CopyHover image" title="CopyHover image" /><img id="checkBoxSelectImage" style="display:none; height:0; width:0;" src="../icons/ch_selected.gif" /><img id="checkBoxUnSelectImage" style="display:none; height:0; width:0;" src="../icons/ch_unselected.gif" /><img id="checkBoxSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/ch_selected_hover.gif" /><img id="checkBoxUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/ch_unselected_hover.gif" /><img id="radioSelectImage" style="display:none; height:0; width:0;" src="../icons/r_select.gif" /><img id="radioUnSelectImage" style="display:none; height:0; width:0;" src="../icons/r_unselect.gif" /><img id="radioSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/r_select_hover.gif" /><img id="radioUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/r_unselect_hover.gif" /><img id="curvedLeftSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_lft_cnr.gif" /><img id="curvedRightSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_rt_cnr.gif" /><img id="curvedLeftUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_lft_cnr.gif" /><img id="curvedRightUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_rt_cnr.gif" /><img id="gradLeftSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_lft_grad.gif" /><img id="gradRightSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_rt_grad.gif" /><img id="gradLeftUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_lft_grad.gif" /><img id="gradRightUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_rt_grad.gif" /><img id="twirlSelectImage" style="display:none; height:0; width:0;" src="../icons/twirl_selected.gif" /><img id="twirlUnSelectImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected.gif" /><img id="twirlSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_selected_hover.gif" /><img id="twirlUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected_hover.gif" /><img id="NSRBottomImage" style="display:none; height:0; width:0;" src="../icons/NSRbottomgrad.gif" /><div id="header"><table id="topTable"><tr id="headerTableRow3"><td><span onclick="ExpandCollapseAll(toggleAllImage)" style="cursor:default;" onkeypress="ExpandCollapseAll_CheckKey(toggleAllImage, event)" tabindex="0"><img ID="toggleAllImage" class="toggleAll" src="../icons/collall.gif" alt="CollapseAll image" title="CollapseAll image" /><label id="collapseAllLabel" for="toggleAllImage" style="display: none;">Collapse All</label><label id="expandAllLabel" for="toggleAllImage" style="display: none;">Expand All</label> </span> | <span id="languageFilterToolTip" style="cursor:default;" onmouseover="languageFilterImage.src=dropDownHoverImage.src;" onmouseout="languageFilterImage.src=dropDownImage.src;" tabindex="0"><img id="languageFilterImage" src="../icons/twirl_unselected.gif" alt="DropDown image" title="DropDown image" /><label id="CSharpLabel" for="languageFilterImage" style="display: none;">Language Filter: C#</label><label id="VisualBasicLabel" for="languageFilterImage" style="display: none;">Language Filter: Visual Basic</label><label id="ManagedCPlusPlusLabel" for="languageFilterImage" style="display: none;">Language Filter: Visual C++</label></span><div id="languageSpan"><div id="CSharp" onclick="changeLanguage(data, 'CSharp', 'cs');"><img id="CSharpImage" onmouseover="mouseOverCheck(CSharpImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(CSharpImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> C#</div><br /><div id="VisualBasic" onclick="changeLanguage(data, 'VisualBasic', 'vb');"><img id="VisualBasicImage" onmouseover="mouseOverCheck(VisualBasicImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(VisualBasicImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> Visual Basic</div><br /><div id="ManagedCPlusPlus" onclick="changeLanguage(data, 'ManagedCPlusPlus', 'cpp');"><img id="ManagedCPlusPlusImage" onmouseover="mouseOverCheck(ManagedCPlusPlusImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(ManagedCPlusPlusImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> Visual C++</div><br /></div> | <a href="#seeAlsoToggle" onclick="OpenSection(seeAlsoToggle)">See Also</a></td></tr><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText">CritterAI Documentation</span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Introduction to Heightfields</span></td></tr><tr><td class="nsrBottom" background="../icons/NSRbottomgrad.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()" /><span style="color: DarkGray"><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[This is preliminary documentation and is subject to change.]</p></span><div class="introduction"><p>
			In order to use the advanced navigation mesh build features you will need to understand the core NMGen build process,
			and in order to understand that process you'll need to understand heightfields.  There are two types of heightfields: 
			<a href="http://en.wikipedia.org/wiki/Voxel" target="_blank">voxel</a>
			field, and vertex fields.  Voxel fields include
			<span sdata="cer" target="T:org.critterai.nmgen.Heightfield"><a href="8A1572B7.htm">Heightfield</a></span> and 
			<span sdata="cer" target="T:org.critterai.nmgen.CompactHeightfield"><a href="C929BBDA.htm">CompactHeightfield</a></span> objects.
			Vertext fields include <span sdata="cer" target="T:org.critterai.nmgen.ContourSet"><a href="BA8E3B8E.htm">ContourSet</a></span> and 
			<span sdata="cer" target="T:org.critterai.nmgen.PolyMesh"><a href="229D6633.htm">PolyMesh</a></span> objects.
      </p></div><a name="basicStructure"> </a><h1 class="heading"><span onclick="ExpandCollapse(sectionToggleID0EDAAA)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(sectionToggleID0EDAAA, event)" tabindex="0"><img id="sectionToggleID0EDAAA" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />Basic Heightfield Structure</span></h1><div id="sectionSectionID0EDAAA" class="section" name="collapseableSection" style=""><p>
				Consider an <a href="http://en.wikipedia.org/wiki/Bounding_volume" target="_blank">AABB</a> at an arbitrary location in 
        <a href="http://en.wikipedia.org/wiki/Euclidean_space" target="_blank">euclidean space</a>. Its bounds are defined by a minimum and maximum vertex.
				</p><div class="mediaNear"><img alt="Heightfield: AABB" src="../media/Heightfield-BasicBox.jpg" /></div><p>
			Now slice the box into vertical columns of uniform width and depth (XZCellSize). The columns make up a grid.
			</p><div class="mediaNear"><img alt="Heightfield: Columns" src="../media/Heightfield-Columns.jpg" /></div><p>
			Now slice the columns in uniform increments up the height axis (YCellSize), 
	    breaking the columns into small axis-aligned boxes. The boxes represent a voxel field. 
	    The vertices at the eight corners of the boxes represent a vertex field.
			</p><div class="mediaNear"><img alt="Heightfield: Voxel Grid" src="../media/Heightfield-VoxelGrid.jpg" /></div><p>
			Vertex fields are fairly easy to understand.  They are simply a way of representing vertices laid out in a grid pattern.
	    But voxel fields require a bit more explanation...
			</p></div><a name="solidHeightfield"> </a><h1 class="heading"><span onclick="ExpandCollapse(sectionToggleID0ECAAA)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(sectionToggleID0ECAAA, event)" tabindex="0"><img id="sectionToggleID0ECAAA" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />The Solid Heightfield</span></h1><div id="sectionSectionID0ECAAA" class="section" name="collapseableSection" style=""><p>
			In this documentation, the term voxel is usually discarded in favor of 
	    span because spans are how voxel information is compressed by NMGen objects.
			</p><p>
			Consider a column of voxels. The area defined by each voxel is either solid, 
	    representing obstructed space, or open, representing space that does not contain any 
	    obstructions.
			</p><div class="mediaNear"><img alt="Heightfield: ColumnVoxels" src="../media/Heightfield-VoxelColumn.jpg" /></div><p>
			We merge the contiguous solid voxels within the column and we get a span of solid voxels.
			</p><div class="mediaNear"><img alt="Heightfield: Solid Span" src="../media/Heightfield-SolidSpan.jpg" /></div><p>
			These solid spans, represented by the 
	    <span sdata="cer" target="T:org.critterai.nmgen.HeightfieldSpan"><a href="96E6ED3.htm">HeightfieldSpan</a></span> structure,
	    are combined to form a 
	    <span sdata="cer" target="T:org.critterai.nmgen.Heightfield"><a href="8A1572B7.htm">Heightfield</a></span> 
	    representing obstructed space.
			</p><div class="mediaNear"><img alt="Heightfield: Solid Field" src="../media/Heightfield-Solid.jpg" /></div></div><a name="openHeightfield"> </a><h1 class="heading"><span onclick="ExpandCollapse(sectionToggleID0EBAAA)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(sectionToggleID0EBAAA, event)" tabindex="0"><img id="sectionToggleID0EBAAA" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />The Open Compact Heightfield</span></h1><div id="sectionSectionID0EBAAA" class="section" name="collapseableSection" style=""><p>
			We don't only care about solid space. Many algorithms operate on the space above solid spans. 
	    For navigation mesh generation this is the most important part of solid space, its upper surface. 
	    Open spans represent this space.
			</p><p>
			It is important to note that this is not a simple inversion of the solid space. If an
	    open heightfield column does not contain any solid spans, then it doesn't have any open spans. 
	    Also, the area below the lowest solid span is ignored. An open span extends from the top of a solid 
	    span to the bottom of the next higher solid span in the column. (Or to "infinity" if there 
	    is no higher solid span.)
	    </p><p /><div class="alert"><table><tr><th><img src="../icons/alert_note.gif" title="Note" /> <b>Note:</b></th></tr><tr><td><p>
				Though it may not be obvious at first glance, this example is the open space representation of the previous example. 
				Three open spans are fully visualized.
				</p></td></tr></table></div><div class="mediaNear"><img alt="Heightfield: Open Field" src="../media/Heightfield-Open.jpg" /></div><p>
			The open spans, represented by the <span sdata="cer" target="T:org.critterai.nmgen.CompactSpan"><a href="1E9C93E1.htm">CompactSpan</a></span> structure,
	    are combined to form a <span sdata="cer" target="T:org.critterai.nmgen.CompactHeightfield"><a href="C929BBDA.htm">CompactHeightfield</a></span> representing open space.
			</p></div><h1 class="heading"><span onclick="ExpandCollapse(seeAlsoToggle)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(seeAlsoToggle, event)" tabindex="0"><img id="seeAlsoToggle" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />See Also</span></h1><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><h4 class="subHeading">Concepts</h4><div class="seeAlsoStyle"><span sdata="link"><a href="0b06b934-9f2b-43a3-a96b-6fd9dc8483c7.htm">An Introduction to NMGen</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="e72bd1ee-04b0-4bbb-a21d-d8d7ecaa11af.htm">The Core Build Process</a></span></div><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><span sdata="cer" target="T:org.critterai.nmgen.Heightfield"><a href="8A1572B7.htm">Heightfield</a></span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:org.critterai.nmgen.CompactHeightfield"><a href="C929BBDA.htm">CompactHeightfield</a></span></div></div><div id="footer"><div class="footerLine"><img width="100%" height="3px" src="../icons/footer.gif" alt="Footer image" title="Footer image" /></div><a href="http://www.critterai.org/" target="_parent">Project Home</a> | <a href="http://code.google.com/p/critterai/" target="_parent">Source Code</a> | <a href="http://www.critterai.org/cailic" target="_parent">License</a><p />Copyright (c) 2010-2012 Stephen A. Pratt</div></div></div></body></html>