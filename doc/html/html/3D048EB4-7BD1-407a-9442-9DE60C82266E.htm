<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Compiling the Input</title><link rel="stylesheet" type="text/css" href="../styles/Presentation.css" /><link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLink.css" /><link rel="stylesheet" type="text/css" href="ms-help://Dx/DxRuntime/DxLink.css" /><script type="text/javascript" src="../scripts/EventUtilities.js"> </script><script type="text/javascript" src="../scripts/SplitScreen.js"> </script><script type="text/javascript" src="../scripts/Dropdown.js"> </script><script type="text/javascript" src="../scripts/script_manifold.js"> </script><script type="text/javascript" src="../scripts/LanguageFilter.js"> </script><script type="text/javascript" src="../scripts/DataStore.js"> </script><script type="text/javascript" src="../scripts/CommonUtilities.js"> </script><script type="text/javascript" src="../scripts/MemberFilter.js"> </script><xml><MSHelp:TOCTitle Title="" /><MSHelp:Keyword Index="A" Term="3D048EB4-7BD1-407a-9442-9DE60C82266E" /><MSHelp:Attr Name="RevisionNumber" Value="1" /><MSHelp:Attr Name="AssetID" Value="3D048EB4-7BD1-407a-9442-9DE60C82266E" /><MSHelp:Attr Name="Abstract" Value="The input compile step involves gathering together all the resources needed to build the navigation mesh. This may be as simple as compiling the source geometry into the correct format, or it may be very complex, such as gathering off-mesh connection ..." /><MSHelp:Attr Name="TopicType" Value="kbArticle" /><MSHelp:Attr Name="Locale" Value="en-us" /></xml><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script></head><body><input type="hidden" id="userDataCache" class="userDataStyle" /><input type="hidden" id="hiddenScrollOffset" /><img id="collapseImage" style="display:none; height:0; width:0;" src="../icons/collapse_all.gif" alt="Collapse image" title="Collapse image" /><img id="expandImage" style="display:none; height:0; width:0;" src="../icons/expand_all.gif" alt="Expand Image" title="Expand Image" /><img id="collapseAllImage" style="display:none; height:0; width:0;" src="../icons/collall.gif" alt="CollapseAll image" title="CollapseAll image" /><img id="expandAllImage" style="display:none; height:0; width:0;" src="../icons/expall.gif" alt="ExpandAll image" title="ExpandAll image" /><img id="dropDownImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected.gif" alt="DropDown image" title="DropDown image" /><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected_hover.gif" alt="DropDownHover image" title="DropDownHover image" /><img id="copyImage" style="display:none; height:0; width:0;" src="../icons/copycode.gif" alt="Copy image" title="Copy image" /><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../icons/copycodeHighlight.gif" alt="CopyHover image" title="CopyHover image" /><img id="checkBoxSelectImage" style="display:none; height:0; width:0;" src="../icons/ch_selected.gif" /><img id="checkBoxUnSelectImage" style="display:none; height:0; width:0;" src="../icons/ch_unselected.gif" /><img id="checkBoxSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/ch_selected_hover.gif" /><img id="checkBoxUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/ch_unselected_hover.gif" /><img id="radioSelectImage" style="display:none; height:0; width:0;" src="../icons/r_select.gif" /><img id="radioUnSelectImage" style="display:none; height:0; width:0;" src="../icons/r_unselect.gif" /><img id="radioSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/r_select_hover.gif" /><img id="radioUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/r_unselect_hover.gif" /><img id="curvedLeftSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_lft_cnr.gif" /><img id="curvedRightSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_rt_cnr.gif" /><img id="curvedLeftUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_lft_cnr.gif" /><img id="curvedRightUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_rt_cnr.gif" /><img id="gradLeftSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_lft_grad.gif" /><img id="gradRightSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_sel_rt_grad.gif" /><img id="gradLeftUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_lft_grad.gif" /><img id="gradRightUnSelectImage" style="display:none; height:0; width:0;" src="../icons/tab_unsel_rt_grad.gif" /><img id="twirlSelectImage" style="display:none; height:0; width:0;" src="../icons/twirl_selected.gif" /><img id="twirlUnSelectImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected.gif" /><img id="twirlSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_selected_hover.gif" /><img id="twirlUnSelectHoverImage" style="display:none; height:0; width:0;" src="../icons/twirl_unselected_hover.gif" /><img id="NSRBottomImage" style="display:none; height:0; width:0;" src="../icons/NSRbottomgrad.gif" /><div id="header"><table id="topTable"><tr id="headerTableRow3"><td><span onclick="ExpandCollapseAll(toggleAllImage)" style="cursor:default;" onkeypress="ExpandCollapseAll_CheckKey(toggleAllImage, event)" tabindex="0"><img ID="toggleAllImage" class="toggleAll" src="../icons/collall.gif" alt="CollapseAll image" title="CollapseAll image" /><label id="collapseAllLabel" for="toggleAllImage" style="display: none;">Collapse All</label><label id="expandAllLabel" for="toggleAllImage" style="display: none;">Expand All</label> </span> | <span id="languageFilterToolTip" style="cursor:default;" onmouseover="languageFilterImage.src=dropDownHoverImage.src;" onmouseout="languageFilterImage.src=dropDownImage.src;" tabindex="0"><img id="languageFilterImage" src="../icons/twirl_unselected.gif" alt="DropDown image" title="DropDown image" /><label id="CSharpLabel" for="languageFilterImage" style="display: none;">Language Filter: C#</label><label id="VisualBasicLabel" for="languageFilterImage" style="display: none;">Language Filter: Visual Basic</label><label id="ManagedCPlusPlusLabel" for="languageFilterImage" style="display: none;">Language Filter: Visual C++</label></span><div id="languageSpan"><div id="CSharp" onclick="changeLanguage(data, 'CSharp', 'cs');"><img id="CSharpImage" onmouseover="mouseOverCheck(CSharpImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(CSharpImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> C#</div><br /><div id="VisualBasic" onclick="changeLanguage(data, 'VisualBasic', 'vb');"><img id="VisualBasicImage" onmouseover="mouseOverCheck(VisualBasicImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(VisualBasicImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> Visual Basic</div><br /><div id="ManagedCPlusPlus" onclick="changeLanguage(data, 'ManagedCPlusPlus', 'cpp');"><img id="ManagedCPlusPlusImage" onmouseover="mouseOverCheck(ManagedCPlusPlusImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" onmouseout="mouseOutCheck(ManagedCPlusPlusImage,radioSelectImage,radioUnSelectImage,radioSelectHoverImage,radioUnSelectHoverImage)" src="../icons/r_unselect.gif" /> Visual C++</div><br /></div> | <a href="#seeAlsoToggle" onclick="OpenSection(seeAlsoToggle)">See Also</a></td></tr><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText">CritterAI Documentation</span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Compiling the Input</span></td></tr><tr><td class="nsrBottom" background="../icons/NSRbottomgrad.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()" /><span style="color: DarkGray"><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[This is preliminary documentation and is subject to change.]</p></span><div class="introduction"><p>
				The input compile step involves gathering together all the resources needed to build the
				navigation mesh.  This may be as simple as compiling the source geometry into the correct
				format, or it may be very complex, such as gathering off-mesh connections, mapping triangle type
				to area, gathering custom processors, etc.
				</p><p>
				The results of this step are the <span sdata="cer" target="T:org.critterai.nmbuild.InputGeometry"><a href="AF3844AA.htm">InputGeometry</a></span>, <span sdata="cer" target="T:org.critterai.nmbuild.ProcessorSet"><a href="E67B5D5E.htm">ProcessorSet</a></span>, 
				and <span sdata="cer" target="T:org.critterai.nmbuild.ConnectionSet"><a href="5AB06572.htm">ConnectionSet</a></span> objects.  (Though finalization of the connection set can be delayed to a later step.)
				</p><p>
				There is no standard implementation for compiling the input since the process is specific to the
				design environment.  In <a href="http://unity3d.com/" target="_blank">Unity</a> the input is gathered from various project assets and scene objects,
				such as mesh filters.  In other environments it might be gathered directly from Maya or 3DSMax data.
				</p></div><h1 class="heading"><span onclick="ExpandCollapse(sectionToggleID0EDAAA)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(sectionToggleID0EDAAA, event)" tabindex="0"><img id="sectionToggleID0EDAAA" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />Input Geometry</span></h1><div id="sectionSectionID0EDAAA" class="section" name="collapseableSection" style=""><p>
				The <span sdata="cer" target="T:org.critterai.nmbuild.InputGeometry"><a href="AF3844AA.htm">InputGeometry</a></span> object consists of standard triangle mesh data (vertices and indices) with additional triangle area assignment. It is
				derived from the source geometry.
				</p><p>
				The <span sdata="cer" target="T:org.critterai.nmbuild.InputGeometryCompiler"><a href="A95AC7F3.htm">InputGeometryCompiler</a></span> and
				<span sdata="cer" target="T:org.critterai.nmbuild.InputGeometryBuilder"><a href="EB70B5C5.htm">InputGeometryBuilder</a></span> classes are used
				to create the input geometry object.
				</p><p>
				Each triangle in the input geometry is assigned an area based on surface type. Usually, triangles are assigned a default area,
				such as <span sdata="cer" target="F:org.critterai.nmgen.NMGen.MaxArea"><a href="124EC9BA.htm">MaxArea</a></span>, then special triangles
				are assigned special areas as needed.  For example, 'meadow' and 'sidewalk' triangles may be the default area, while
				'water' and 'swamp' triangles are assigned to other areas.  Assigning areas during the build process ensures that
				polygons are properly formed for each type of surface.
				</p><span id="cbc_1" x-lang="CSharp" codeLanguage="CSharp"><div class="highlight-title"><span class="highlight-copycode" onkeypress="javascript:CopyColorizedCodeCheckKey(this.parentNode, event);" tabindex="0" onmouseover="CopyCodeChangeIcon(this)" onmouseout="CopyCodeChangeIcon(this)" onclick="javascript:CopyColorizedCode(this.parentNode);"><img style="margin-right: 5px;" src="../icons/CopyCode.gif" />Copy</span>C#</div><div class="code"><pre xml:space="preserve"><span class="highlight-comment">// Example: Creating a simple input geometry object.</span>

<span class="highlight-comment">// Where 'mesh' is a TriangleMesh object containing all of the input triangles.</span>

<span class="highlight-comment">// Create an area buffer that assigns the default area id to all triangles.</span>
<span class="highlight-keyword">byte</span>[] areas = NMGen.CreateDefaultAreaBuffer(mesh.triCount);

<span class="highlight-comment">// Create the builder.</span>
<span class="highlight-comment">// All triangles with a slope over 45.5f will be re-assigned to NMGen.NullArea.</span>
InputGeometryBuilder gbuilder = InputGeometryBuilder.Create(mesh, areas, <span class="highlight-number">45.5</span>f);

<span class="highlight-comment">// Build in a single step.</span>
gbuilder.BuildAll();

<span class="highlight-comment">// Get the result.</span>
InputGeometry geom = gbuilder.Result;</pre></div></span><p>
				The <span sdata="cer" target="T:org.critterai.nmbuild.InputGeometryCompiler"><a href="A95AC7F3.htm">InputGeometryCompiler</a></span> class can be used to 
				combine multiple triangle meshes into a single triangle mesh, including area assignment.
				</p></div><h1 class="heading"><span onclick="ExpandCollapse(sectionToggleID0ECAAA)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(sectionToggleID0ECAAA, event)" tabindex="0"><img id="sectionToggleID0ECAAA" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />ProcessorSet</span></h1><div id="sectionSectionID0ECAAA" class="section" name="collapseableSection" style=""><p>
				The <span sdata="cer" target="T:org.critterai.nmbuild.ProcessorSet"><a href="E67B5D5E.htm">ProcessorSet</a></span> contains <span sdata="cer" target="T:org.critterai.nmbuild.INMGenProcessor"><a href="246E84A2.htm">INMGenProcessor</a></span> objects used to add special behavior to the
				main build step. A processor may do something simple, such as applying default flags
				to all polygons (<span sdata="cer" target="T:org.critterai.nmbuild.ApplyPolygonFlags"><a href="E0844A0B.htm">ApplyPolygonFlags</a></span>), or something
				complex such as evaluating heightfield intermediates in order to auto-generate off-mesh connections.
				</p><span id="cbc_2" x-lang="CSharp" codeLanguage="CSharp"><div class="highlight-title"><span class="highlight-copycode" onkeypress="javascript:CopyColorizedCodeCheckKey(this.parentNode, event);" tabindex="0" onmouseover="CopyCodeChangeIcon(this)" onmouseout="CopyCodeChangeIcon(this)" onclick="javascript:CopyColorizedCode(this.parentNode);"><img style="margin-right: 5px;" src="../icons/CopyCode.gif" />Copy</span>C#</div><div class="code"><pre xml:space="preserve"><span class="highlight-comment">// Example: Creating a processor set.</span>

<span class="highlight-comment">// There is a standard set of processors needed for almost every build.</span>
myProccessorList.Add(ProcessorSet.GetStandard(ProcessorSet.StandardOptions));

<span class="highlight-comment">// You can also add other processors, including custom processors of your own.</span>
myProccessorList.Add(myCustomProcessor);
myProcessorList.Add(myOtherCustomProcessor);

<span class="highlight-comment">// Create the set.</span>
ProcessorSet processors = ProcessorSet.Create(myProcessorList.ToArray());</pre></div></span><p>How these processors are used is described further in <span sdata="link"><a href="FCD34CAE-02FA-48fd-891E-FB82EE360F49.htm">The Incremental Builder</a></span> topic.</p></div><h1 class="heading"><span onclick="ExpandCollapse(sectionToggleID0EBAAA)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(sectionToggleID0EBAAA, event)" tabindex="0"><img id="sectionToggleID0EBAAA" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />ConnectionSet</span></h1><div id="sectionSectionID0EBAAA" class="section" name="collapseableSection" style=""><p>
				The <span sdata="cer" target="T:org.critterai.nmbuild.ConnectionSet"><a href="5AB06572.htm">ConnectionSet</a></span> defines the off-mesh connections that will be added to the navigation mesh.  In some cases
				they are fully defined during the input build process.  In other cases they are generated by custom processor's
				later in the build process.
				</p><p>
				The <span sdata="cer" target="T:org.critterai.nmbuild.ConnectionSetCompiler"><a href="7884927B.htm">ConnectionSetCompiler</a></span> can be used to dynamically compile
				connections for eventual inclusion in the connection set.
				</p></div><h1 class="heading"><span onclick="ExpandCollapse(seeAlsoToggle)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(seeAlsoToggle, event)" tabindex="0"><img id="seeAlsoToggle" class="toggle" name="toggleSwitch" src="../icons/collapse_all.gif" />See Also</span></h1><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><h4 class="subHeading">Concepts</h4><div class="seeAlsoStyle"><span sdata="link"><a href="0b06b934-9f2b-43a3-a96b-6fd9dc8483c7.htm">An Introduction to NMGen</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="FCD34CAE-02FA-48fd-891E-FB82EE360F49.htm">The Incremental Builder</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="ad1c623a-56b7-4aa6-921e-f2d67b39622a.htm">Creating the Navigation Mesh</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="e76dda55-5f91-4c2a-bf8d-fa34de59e82b.htm">Building Multi-Tile Meshes</a></span></div><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><span sdata="cer" target="T:org.critterai.nmbuild.InputGeometry"><a href="AF3844AA.htm">InputGeometry</a></span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:org.critterai.nmbuild.ProcessorSet"><a href="E67B5D5E.htm">ProcessorSet</a></span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:org.critterai.nmbuild.ConnectionSet"><a href="5AB06572.htm">ConnectionSet</a></span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:org.critterai.nmbuild.IncrementalBuilder"><a href="49183141.htm">IncrementalBuilder</a></span></div></div><div id="footer"><div class="footerLine"><img width="100%" height="3px" src="../icons/footer.gif" alt="Footer image" title="Footer image" /></div><a href="http://www.critterai.org/" target="_parent">Project Home</a> | <a href="http://code.google.com/p/critterai/" target="_parent">Source Code</a> | <a href="http://www.critterai.org/cailic" target="_parent">License</a><p />Copyright (c) 2010-2012 Stephen A. Pratt</div></div></div></body></html>